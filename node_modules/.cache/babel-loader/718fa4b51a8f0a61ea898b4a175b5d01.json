{"remainingRequest":"/Users/mac/Desktop/Blog/admin/node_modules/babel-loader/lib/index.js!/Users/mac/Desktop/Blog/admin/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/mac/Desktop/Blog/admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/mac/Desktop/Blog/admin/src/views/pages/article/Create.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/mac/Desktop/Blog/admin/src/views/pages/article/Create.vue","mtime":1599997011525},{"path":"/Users/mac/Desktop/Blog/admin/node_modules/cache-loader/dist/cjs.js","mtime":1599720796876},{"path":"/Users/mac/Desktop/Blog/admin/node_modules/babel-loader/lib/index.js","mtime":1597123372130},{"path":"/Users/mac/Desktop/Blog/admin/node_modules/cache-loader/dist/cjs.js","mtime":1599720796876},{"path":"/Users/mac/Desktop/Blog/admin/node_modules/vue-loader/lib/index.js","mtime":1599720798354}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiL1VzZXJzL21hYy9EZXNrdG9wL0Jsb2cvYWRtaW4vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwpleHBvcnQgZGVmYXVsdCB7CiAgcHJvcHM6IHsKICAgIGlkOiB7fQogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGFydGljbGU6IHt9LAogICAgICBiZWxvbmdzOiBbXQogICAgfTsKICB9LAogIGNvbXBvbmVudHM6IHt9LAogIG1ldGhvZHM6IHsKICAgIGFmdGVyVXBsb2FkOiBmdW5jdGlvbiBhZnRlclVwbG9hZChyZXMpIHsKICAgICAgY29uc29sZS5sb2cocmVzKTsKICAgIH0sCiAgICAvL+iOt+WPluWIhuexu+WIl+ihqAogICAgZmV0Y2hfYmVsb25nOiBmdW5jdGlvbiBmZXRjaF9iZWxvbmcoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICAgIHZhciByZXM7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDI7CiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuJGh0dHAuZ2V0KCdjbGFzc2lmaWNhdGlvbicpOwoKICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICByZXMgPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICAgICAgX3RoaXMuYmVsb25ncyA9IHJlcy5kYXRhOwoKICAgICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlKTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgc3VibWl0OiBmdW5jdGlvbiBzdWJtaXQoKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTIoKSB7CiAgICAgICAgdmFyIHJlczsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0MikgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgaWYgKCEoX3RoaXMyLmFydGljbGUgIT09ICcnKSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDE0OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBpZiAoIV90aGlzMi5pZCkgewogICAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDc7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gNDsKICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczIuJGh0dHAucHV0KCJhcnRpY2xlLyIuY29uY2F0KF90aGlzMi5pZCksIF90aGlzMi5hcnRpY2xlKTsKCiAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgICAgcmVzID0gX2NvbnRleHQyLnNlbnQ7CiAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDEwOwogICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gOTsKICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczIuJGh0dHAucG9zdCgnYXJ0aWNsZScsIF90aGlzMi5hcnRpY2xlKTsKCiAgICAgICAgICAgICAgY2FzZSA5OgogICAgICAgICAgICAgICAgcmVzID0gX2NvbnRleHQyLnNlbnQ7CgogICAgICAgICAgICAgIGNhc2UgMTA6CiAgICAgICAgICAgICAgICBfdGhpczIuJHJvdXRlci5wdXNoKCcvYWRtaW4vYXJ0aWNsZS9saXN0Jyk7CgogICAgICAgICAgICAgICAgX3RoaXMyLiRtZXNzYWdlKHsKICAgICAgICAgICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnLAogICAgICAgICAgICAgICAgICBtZXNzYWdlOiAn5o+Q5Lqk5oiQ5YqfJwogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAxNTsKICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICBjYXNlIDE0OgogICAgICAgICAgICAgICAgX3RoaXMyLiRtZXNzYWdlKHsKICAgICAgICAgICAgICAgICAgdHlwZTogJ2Vycm9yJywKICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ+aPkOS6pOWksei0pScKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDE1OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUyKTsKICAgICAgfSkpKCk7CiAgICB9CiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgdGhpcy5mZXRjaF9iZWxvbmcoKTsKICB9Cn07"},{"version":3,"sources":["Create.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8CA,eAAA;AACA,EAAA,KAAA,EAAA;AACA,IAAA,EAAA,EAAA;AADA,GADA;AAIA,EAAA,IAJA,kBAIA;AACA,WAAA;AACA,MAAA,OAAA,EAAA,EADA;AAEA,MAAA,OAAA,EAAA;AAFA,KAAA;AAIA,GATA;AAUA,EAAA,UAAA,EAAA,EAVA;AAaA,EAAA,OAAA,EAAA;AACA,IAAA,WADA,uBACA,GADA,EACA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,GAAA;AACA,KAHA;AAIA;AACA,IAAA,YALA,0BAKA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBACA,KAAA,CAAA,KAAA,CAAA,GAAA,CAAA,gBAAA,CADA;;AAAA;AACA,gBAAA,GADA;AAEA,gBAAA,KAAA,CAAA,OAAA,GAAA,GAAA,CAAA,IAAA;;AAFA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA,KARA;AASA,IAAA,MATA,oBASA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAEA,MAAA,CAAA,OAAA,KAAA,EAFA;AAAA;AAAA;AAAA;;AAAA,qBAGA,MAAA,CAAA,EAHA;AAAA;AAAA;AAAA;;AAAA;AAAA,uBAIA,MAAA,CAAA,KAAA,CAAA,GAAA,mBAAA,MAAA,CAAA,EAAA,GAAA,MAAA,CAAA,OAAA,CAJA;;AAAA;AAIA,gBAAA,GAJA;AAAA;AAAA;;AAAA;AAAA;AAAA,uBAMA,MAAA,CAAA,KAAA,CAAA,IAAA,CAAA,SAAA,EAAA,MAAA,CAAA,OAAA,CANA;;AAAA;AAMA,gBAAA,GANA;;AAAA;AAQA,gBAAA,MAAA,CAAA,OAAA,CAAA,IAAA,CAAA,qBAAA;;AACA,gBAAA,MAAA,CAAA,QAAA,CAAA;AACA,kBAAA,IAAA,EAAA,SADA;AAEA,kBAAA,OAAA,EAAA;AAFA,iBAAA;;AATA;AAAA;;AAAA;AAcA,gBAAA,MAAA,CAAA,QAAA,CAAA;AACA,kBAAA,IAAA,EAAA,OADA;AAEA,kBAAA,OAAA,EAAA;AAFA,iBAAA;;AAdA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAmBA;AA5BA,GAbA;AA2CA,EAAA,OA3CA,qBA2CA;AACA,SAAA,YAAA;AACA;AA7CA,CAAA","sourcesContent":["<template>\n  <div>\n    <h1>{{id ? '编辑' : '新建'}}文章</h1>\n    <el-form label-width=\"130px\" @submit.native.prevent=\"submit\">\n        <el-row>\n          <el-col :span=\"12\">\n            <div class=\"grid-content bg-purple-dark\">\n              <el-form-item label=\"文章标题:\">\n                <el-input style=\"width: 200px;\" type=\"text\" placeholder=\"请输入内容\" v-model=\"article.title\"></el-input>\n              </el-form-item>\n            </div>\n          </el-col>\n          <el-col :span=\"12\">\n            <div class=\"grid-content bg-purple-dark\">\n              <el-form-item label=\"分类:\">\n                <el-select v-model=\"article.belong\" placeholder=\"请选择\">\n                  <el-option v-for=\"item in belongs\" :key=\"item._id\" :label=\"item.classification\" :value=\"item._id\"></el-option>\n                </el-select>\n              </el-form-item>\n            </div>\n          </el-col>\n        </el-row>\n\n      <el-form-item label=\"描述:\">\n        <el-input type=\"textarea\" autosize placeholder=\"请输入内容\" v-model=\"article.description\"></el-input>\n      </el-form-item>\n\n      <el-form-item label=\"背景:\">\n        <el-upload class=\"avatar-uploader\" :action=\"$http.defaults.baseURL + '/upload'\" :show-file-list=\"false\" :on-success=\"afterUpload\">\n          <img v-if=\"article.image\" :src=\"article.image\" class=\"avatar\">\n          <i v-else class=\"el-icon-plus avatar-uploader-icon\"></i>\n        </el-upload>\n      </el-form-item>\n\n      <el-form-item label=\"内容:\">\n        <mavon-editor v-model=\"article.body\" ref=\"md\"/>\n      </el-form-item>\n\n      <el-form-item>\n        <el-button type=\"primary\" native-type=\"submit\">保存</el-button>\n      </el-form-item>\n    </el-form>\n  </div>\n</template>\n\n<script>\nexport default {\n  props: {\n    id: {}\n  },\n  data() {\n    return {\n      article: {},\n      belongs: [],\n    }\n  },\n  components: {\n\n  },\n  methods: {\n    afterUpload(res) {\n      console.log(res);\n    },\n      //获取分类列表\n    async fetch_belong() {\n      const res = await this.$http.get('classification');\n      this.belongs = res.data;\n    },\n    async submit() {\n      let res\n      if(this.article !== ''){\n        if(this.id){\n        res = await this.$http.put(`article/${this.id}`, this.article)\n      }else{\n        res = await this.$http.post('article', this.article)\n      }\n      this.$router.push('/admin/article/list')\n        this.$message({\n          type: 'success',\n          message: '提交成功'\n        })\n      }else{\n        this.$message({\n          type: 'error',\n          message: '提交失败'\n        })\n      }\n    },\n  },\n  created() {\n    this.fetch_belong()\n  }\n}\n</script>\n\n<style scoped lang=\"css\">\n  .avatar-uploader .el-upload {\n    border: 1px dashed #d9d9d9;\n    border-radius: 6px;\n    cursor: pointer;\n    position: relative;\n    overflow: hidden;\n  }\n  .avatar-uploader .el-upload:hover {\n    border-color: #409EFF;\n  }\n  .avatar-uploader-icon {\n    font-size: 28px;\n    color: #8c939d;\n    width: 178px;\n    height: 178px;\n    line-height: 178px;\n    text-align: center;\n  }\n  .avatar {\n    width: 178px;\n    height: 178px;\n    display: block;\n  }\n</style>\n"],"sourceRoot":"src/views/pages/article"}]}