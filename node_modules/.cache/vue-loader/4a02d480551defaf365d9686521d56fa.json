{"remainingRequest":"/Users/mac/Desktop/Blog/admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/mac/Desktop/Blog/admin/src/views/pages/article/Create.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/mac/Desktop/Blog/admin/src/views/pages/article/Create.vue","mtime":1599997011525},{"path":"/Users/mac/Desktop/Blog/admin/node_modules/cache-loader/dist/cjs.js","mtime":1599720796876},{"path":"/Users/mac/Desktop/Blog/admin/node_modules/babel-loader/lib/index.js","mtime":1597123372130},{"path":"/Users/mac/Desktop/Blog/admin/node_modules/cache-loader/dist/cjs.js","mtime":1599720796876},{"path":"/Users/mac/Desktop/Blog/admin/node_modules/vue-loader/lib/index.js","mtime":1599720798354}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICBwcm9wczogewogICAgaWQ6IHt9CiAgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgYXJ0aWNsZToge30sCiAgICAgIGJlbG9uZ3M6IFtdLAogICAgfQogIH0sCiAgY29tcG9uZW50czogewoKICB9LAogIG1ldGhvZHM6IHsKICAgIGFmdGVyVXBsb2FkKHJlcykgewogICAgICBjb25zb2xlLmxvZyhyZXMpOwogICAgfSwKICAgICAgLy/ojrflj5bliIbnsbvliJfooagKICAgIGFzeW5jIGZldGNoX2JlbG9uZygpIHsKICAgICAgY29uc3QgcmVzID0gYXdhaXQgdGhpcy4kaHR0cC5nZXQoJ2NsYXNzaWZpY2F0aW9uJyk7CiAgICAgIHRoaXMuYmVsb25ncyA9IHJlcy5kYXRhOwogICAgfSwKICAgIGFzeW5jIHN1Ym1pdCgpIHsKICAgICAgbGV0IHJlcwogICAgICBpZih0aGlzLmFydGljbGUgIT09ICcnKXsKICAgICAgICBpZih0aGlzLmlkKXsKICAgICAgICByZXMgPSBhd2FpdCB0aGlzLiRodHRwLnB1dChgYXJ0aWNsZS8ke3RoaXMuaWR9YCwgdGhpcy5hcnRpY2xlKQogICAgICB9ZWxzZXsKICAgICAgICByZXMgPSBhd2FpdCB0aGlzLiRodHRwLnBvc3QoJ2FydGljbGUnLCB0aGlzLmFydGljbGUpCiAgICAgIH0KICAgICAgdGhpcy4kcm91dGVyLnB1c2goJy9hZG1pbi9hcnRpY2xlL2xpc3QnKQogICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnLAogICAgICAgICAgbWVzc2FnZTogJ+aPkOS6pOaIkOWKnycKICAgICAgICB9KQogICAgICB9ZWxzZXsKICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgIHR5cGU6ICdlcnJvcicsCiAgICAgICAgICBtZXNzYWdlOiAn5o+Q5Lqk5aSx6LSlJwogICAgICAgIH0pCiAgICAgIH0KICAgIH0sCiAgfSwKICBjcmVhdGVkKCkgewogICAgdGhpcy5mZXRjaF9iZWxvbmcoKQogIH0KfQo="},{"version":3,"sources":["Create.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Create.vue","sourceRoot":"src/views/pages/article","sourcesContent":["<template>\n  <div>\n    <h1>{{id ? '编辑' : '新建'}}文章</h1>\n    <el-form label-width=\"130px\" @submit.native.prevent=\"submit\">\n        <el-row>\n          <el-col :span=\"12\">\n            <div class=\"grid-content bg-purple-dark\">\n              <el-form-item label=\"文章标题:\">\n                <el-input style=\"width: 200px;\" type=\"text\" placeholder=\"请输入内容\" v-model=\"article.title\"></el-input>\n              </el-form-item>\n            </div>\n          </el-col>\n          <el-col :span=\"12\">\n            <div class=\"grid-content bg-purple-dark\">\n              <el-form-item label=\"分类:\">\n                <el-select v-model=\"article.belong\" placeholder=\"请选择\">\n                  <el-option v-for=\"item in belongs\" :key=\"item._id\" :label=\"item.classification\" :value=\"item._id\"></el-option>\n                </el-select>\n              </el-form-item>\n            </div>\n          </el-col>\n        </el-row>\n\n      <el-form-item label=\"描述:\">\n        <el-input type=\"textarea\" autosize placeholder=\"请输入内容\" v-model=\"article.description\"></el-input>\n      </el-form-item>\n\n      <el-form-item label=\"背景:\">\n        <el-upload class=\"avatar-uploader\" :action=\"$http.defaults.baseURL + '/upload'\" :show-file-list=\"false\" :on-success=\"afterUpload\">\n          <img v-if=\"article.image\" :src=\"article.image\" class=\"avatar\">\n          <i v-else class=\"el-icon-plus avatar-uploader-icon\"></i>\n        </el-upload>\n      </el-form-item>\n\n      <el-form-item label=\"内容:\">\n        <mavon-editor v-model=\"article.body\" ref=\"md\"/>\n      </el-form-item>\n\n      <el-form-item>\n        <el-button type=\"primary\" native-type=\"submit\">保存</el-button>\n      </el-form-item>\n    </el-form>\n  </div>\n</template>\n\n<script>\nexport default {\n  props: {\n    id: {}\n  },\n  data() {\n    return {\n      article: {},\n      belongs: [],\n    }\n  },\n  components: {\n\n  },\n  methods: {\n    afterUpload(res) {\n      console.log(res);\n    },\n      //获取分类列表\n    async fetch_belong() {\n      const res = await this.$http.get('classification');\n      this.belongs = res.data;\n    },\n    async submit() {\n      let res\n      if(this.article !== ''){\n        if(this.id){\n        res = await this.$http.put(`article/${this.id}`, this.article)\n      }else{\n        res = await this.$http.post('article', this.article)\n      }\n      this.$router.push('/admin/article/list')\n        this.$message({\n          type: 'success',\n          message: '提交成功'\n        })\n      }else{\n        this.$message({\n          type: 'error',\n          message: '提交失败'\n        })\n      }\n    },\n  },\n  created() {\n    this.fetch_belong()\n  }\n}\n</script>\n\n<style scoped lang=\"css\">\n  .avatar-uploader .el-upload {\n    border: 1px dashed #d9d9d9;\n    border-radius: 6px;\n    cursor: pointer;\n    position: relative;\n    overflow: hidden;\n  }\n  .avatar-uploader .el-upload:hover {\n    border-color: #409EFF;\n  }\n  .avatar-uploader-icon {\n    font-size: 28px;\n    color: #8c939d;\n    width: 178px;\n    height: 178px;\n    line-height: 178px;\n    text-align: center;\n  }\n  .avatar {\n    width: 178px;\n    height: 178px;\n    display: block;\n  }\n</style>\n"]}]}